var jqCronDefaultSettings={texts:{},monthdays:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],hours:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],lang:"en",enabled_minute:!1,enabled_hour:!0,enabled_day:!0,enabled_week:!0,enabled_month:!0,enabled_year:!0,multiple_dom:!1,multiple_month:!1,multiple_mins:!1,multiple_dow:!1,multiple_time_hours:!1,multiple_time_minutes:!1,numeric_zero_pad:!1,numeric_zero_pad_mins:!0,numeric_zero_pad_time_min:!0,numeric_zero_pad_time_hour:!0,numeric_zero_pad_dom:!1,default_period:"day",default_value:"",no_reset_button:!0,disabled:!1,bind_to:null,bind_method:{set:function(e,t){e.is(":input")?e.val(t):e.data("jqCronValue",t)},get:function(e){return e.is(":input")?e.val():e.data("jqCronValue")}}};!function(y){function r(e,t){for(var n in t)y.isPlainObject(t[n])?e[n]=r(e[n]&&y.isPlainObject(e[n])?e[n]:{},t[n]):y.isArray(t[n])?e[n]=t[n].slice(0):void 0!==t[n]&&(e[n]=t[n]);return e}this.jqCronMergeSettings=function(e){return r(r({},jqCronDefaultSettings),e||{})},y.fn.jqCronGetInstance=function(){return this.data("jqCron")},y.fn.jqCron=function(e){var a=e;return this.each(function(){var e,t=y(this),n=jqCronMergeSettings(a),r=n.texts[n.lang];if("object"!=typeof r||y.isEmptyObject(r))console&&console.error('Missing translations for language "'+n.lang+'". Please include jqCron.'+n.lang+".js or manually provide the necessary translations when calling $.fn.jqCron().");else{if(!n.jquery_container)if(t.is(":container"))n.jquery_element=t.uniqueId("jqCron");else{if(!t.is(":autoclose"))return void(console&&console.error(n.texts[n.lang].error1.replace("%s",this.tagName)));1==t.next(".jqCron").length&&t.next(".jqCron").remove(),n.jquery_element=y('<span class="jqCron"></span>').uniqueId("jqCron").insertAfter(t)}t.is(":input")&&(n.bind_to=n.bind_to||t),n.bind_to?(n.bind_to.is(":input")&&n.bind_to.blur(function(){var e=n.bind_method.get(n.bind_to);t.jqCronGetInstance().setCron(e)}),r=n.bind_method.get(n.bind_to),(e=new s(n)).setCron(r)):e=new s(n),y(this).data("jqCron",e)}})};var x=[];function s(a){var r,s,i,o,l,u,c,d=!1,h=this,n=this,m=y('<span class="jqCron-container"></span>'),p=y('<span class="jqCron-blocks"></span>'),g=y('<span class="jqCron-period"></span>'),f=y('<span class="jqCron-dom"></span>'),_=y('<span class="jqCron-month"></span>'),b=y('<span class="jqCron-mins"></span>'),C=y('<span class="jqCron-dow"></span>'),v=y('<span class="jqCron-time"></span>'),j=y('<span class="jqCron-cross">&#10008;</span>'),V=[];function q(e,t,n){var r=new w(h,e,t,n);return r.$.bind("selector:open",function(){for(var e=x.length;e--;)if(x[e]!=h)x[e].closeSelectors();else for(var t=V.length;t--;)V[t]!=r&&V[t].close()}),r.$.bind("selector:change",function(){var e=!1;d&&(a.multiple_mins==a.multiple_time_minutes&&(r==s?e=o.setValue(s.getValue()):r==o&&(e=s.setValue(o.getValue()))),e||m.trigger("cron:change",h.getCron()))}),V.push(r),r}this.disable=function(){m.addClass("disable"),a.disabled=!0,h.closeSelectors()},this.isDisabled=function(){return 1==a.disabled},this.enable=function(){m.removeClass("disable"),a.disabled=!1},this.getCron=function(){var e=r.getValue(),t=["*","*","*","*","*"];return"hour"==e&&(t[0]=s.getCronValue()),"day"!=e&&"week"!=e&&"month"!=e&&"year"!=e||(t[0]=o.getCronValue(),t[1]=i.getCronValue()),"month"!=e&&"year"!=e||(t[2]=u.getCronValue()),"year"==e&&(t[3]=c.getCronValue()),"week"==e&&(t[4]=l.getCronValue()),t.join(" ")},this.setCron=function(e){if(e)try{var t=(e=e.replace(/\s+/g," ").replace(/^ +/,"").replace(/ +$/,"")).replace(/\*\//g,"").replace(/[^\* ]/g,"-").replace(/-+/g,"-").replace(/ +/g,""),n=e.split(" ");5!=n.length&&h.error(h.getText("error2")),"*****"==t?r.setValue("minute"):"-****"==t?(r.setValue("hour"),s.setCronValue(n[0]),o.setCronValue(n[0])):"***"==t.substring(2,t.length)?(r.setValue("day"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1])):"-**"==t.substring(2,t.length)?(r.setValue("month"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),u.setCronValue(n[2])):"**-"==t.substring(2,t.length)?(r.setValue("week"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),l.setCronValue(n[4])):"-*"==t.substring(3,t.length)?(r.setValue("year"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),u.setCronValue(n[2]),c.setCronValue(n[3])):h.error(h.getText("error4")),h.clearError()}catch(e){}},this.closeSelectors=function(){for(var e=V.length;e--;)V[e].close()},this.getId=function(){return n.attr("id")},this.getText=function(e){e=a.texts[a.lang][e]||null;return e="string"==typeof e&&e.match("<br")?'<span class="jqCron-text">'+(e=e.replace(/(<br *\/>)/gi,'</span><br /><span class="jqCron-text">'))+"</span>":e},this.getHumanText=function(){var t=[];return m.find("> span > span:visible").find(".jqCron-text, .jqCron-selector > span").each(function(){var e=y(this).text().replace(/\s+$/g,"").replace(/^\s+/g,"");e&&t.push(e)}),t.join(" ").replace(/\s:\s/g,":")},this.getSettings=function(){return a},this.error=function(e){throw console&&console.error("[jqCron Error] "+e),m.addClass("jqCron-error").attr("title",e),e},this.clearError=function(){m.attr("title","").removeClass("jqCron-error")},this.clear=function(){u.setValue([]),l.setValue([]),s.setValue([]),c.setValue([]),i.setValue([]),o.setValue([]),h.triggerChange()},this.init=function(){var e,t;if(!d){"disable"in(a=jqCronMergeSettings(a))&&!a.disabled&&(a.disabled=a.disable),"hour_labels"in a||(a.hour_labels=a.hours.map(function(e){return String(e)})),"minute_labels"in a||(a.minute_labels=a.minutes.map(function(e){return String(e)})),"monthday_labels"in a||(a.monthday_labels=a.monthdays.map(function(e){return String(e)})),a.jquery_element||h.error(h.getText("error3")),(n=a.jquery_element).append(m),m.data("id",a.id),m.data("jqCron",h),m.append(p),a.no_reset_button||m.append(j),a.disabled&&m.addClass("disable"),p.append(g),/^(ko)$/i.test(a.lang)?p.append(_,f):p.append(f,_),p.append(b),p.append(C),p.append(v),j.click(function(){h.isDisabled()||h.clear()}),m.bind("cron:change",function(e,t){a.bind_to&&(a.bind_method.set&&a.bind_method.set(a.bind_to,t),h.clearError())}),g.append(h.getText("text_period")),r=q(g,!1,"period"),a.enabled_minute&&r.add("minute",h.getText("name_minute")),a.enabled_hour&&r.add("hour",h.getText("name_hour")),a.enabled_day&&r.add("day",h.getText("name_day")),a.enabled_week&&r.add("week",h.getText("name_week")),a.enabled_month&&r.add("month",h.getText("name_month")),a.enabled_year&&r.add("year",h.getText("name_year")),r.$.bind("selector:change",function(e,t){f.hide(),_.hide(),b.hide(),C.hide(),v.hide(),"hour"==t?b.show():"day"==t?v.show():"week"==t?(C.show(),v.show()):"month"==t?(f.show(),v.show()):"year"==t&&(f.show(),_.show(),v.show())}),r.setValue(a.default_period),b.append(h.getText("text_mins")),s=q(b,a.multiple_mins,"minutes");for(e=0,t=a.minutes;e<t.length;e++)s.add(t[e],a.numeric_zero_pad_mins?("00"+t[e]).slice(-2):t[e]);for(v.append(h.getText("text_time")),i=q(v,a.multiple_time_hours,"time_hours"),e=0,t=a.hours,labelsList=a.hour_labels;e<t.length;e++)i.add(t[e],a.numeric_zero_pad_time_hour?("00"+labelsList[e]).slice(-2):labelsList[e]);for(o=q(v,a.multiple_time_minutes,"time_minutes"),e=0,t=a.minutes,labelsList=a.minute_labels;e<t.length;e++)o.add(t[e],a.numeric_zero_pad_time_min?("00"+labelsList[e]).slice(-2):labelsList[e]);for(C.append(h.getText("text_dow")),l=q(C,a.multiple_dow,"day_of_week"),e=0,t=h.getText("weekdays");e<t.length;e++)l.add(e+1,t[e]);for(f.append(h.getText("text_dom")),u=q(f,a.multiple_dom,"day_of_month"),e=0,t=a.monthdays,labelsList=a.monthday_labels;e<t.length;e++)u.add(t[e],a.numeric_zero_pad_dom?("00"+labelsList[e]).slice(-2):labelsList[e]);for(_.append(h.getText("text_month")),c=q(_,a.multiple_month,"month"),e=0,t=h.getText("months");e<t.length;e++)c.add(e+1,t[e]);y("body").click(function(){for(var e=V.length,t=0;t<e;t++)V[t].close()}),d=!0,a.default_value&&h.setCron(a.default_value)}},this.triggerChange=function(){m.trigger("cron:change",h.getCron())},x.push(this),this.$=m;try{this.init(),h.triggerChange()}catch(e){}}function w(c,e,d,h){var m=this,a=y('<ul class="jqCron-selector-list"></ul>'),t=y('<span class="jqCron-selector-title"></span>'),s=y('<span class="jqCron-selector"></span>'),p={},g=[],n=!0,r=c.getSettings().numeric_zero_pad;this.getTotalItem=function(e){var t=0;switch(h){case"minutes":case"time_minutes":t=60-this.itemStartAt();break;case"time_hours":t=24-this.itemStartAt();break;case"day_of_month":t=31-this.itemStartAt();break;case"month":t=12-this.itemStartAt();break;case"day_of_week":t=7-this.itemStartAt()}if(e){for(var n=0,r=0;r<t;r++)r%e==0&&(n=r);return n/e+1}return t},this.itemStartAt=function(){switch(h){case"minutes":case"time_minutes":case"time_hours":return 0;case"day_of_month":case"month":case"day_of_week":return 1}},this.getValue=function(){return d?g:g[0]},this.getCronValue=function(){if(0==g.length)return"*";for(var e=[g[0]],t=g[0],n=g[0],r=g.length,a=1;a<r;a++)g[a]==n+1?(n=g[a],e[e.length-1]=t+"-"+n):(t=n=g[a],e.push(n));if(1<e.length){var s=0===e[0]?e[1]:e[0];if(this.getTotalItem(s)===e.length){for(var i=!0,o=0,a=1;a<e.length;a++)if(o+=s,e[a]%s!=0||s*a!==o){i=!1;break}if(i)return"*/"+(m.multipleOf=s)}}return e.join(",")},this.setCronValue=function(e){var t,n,r=[];if("*"!==e)for(;""!=e;)if((t=e.match(/^\*\/([0-9]+),?/))&&2==t.length){for(n=0;n<=59;n+=0|t[1])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+)\/([0-9]+),?/))&&4==t.length){for(n=0|t[1];n<=(0|t[2]);n+=0|t[3])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+),?/))&&3==t.length){for(n=0|t[1];n<=(0|t[2]);n++)r.push(n);e=e.replace(t[0],"")}else{if(!(t=e.match(/^([0-9]+),?/))||2!=t.length)return;r.push(0|t[1]),e=e.replace(t[0],"")}m.setValue(r)},this.close=function(){s.trigger("selector:close")},this.open=function(){s.trigger("selector:open")},this.isOpened=function(){return a.is(":visible")},this.addValue=function(e){var t=d?g.slice(0):[];t.push(e),m.setValue(t)},this.removeValue=function(e){if(d){for(var t=[],n=0;n<g.length;n++)e!=[g[n]]&&t.push(g[n]);m.setValue(t)}else m.clear()},this.setValue=function(e){var t,n=[],r=g.join(" ");if(y.isArray(e)||(e=[e]),a.find("li").removeClass("selected"),(e=function(e){for(var t=0,n=e.length,r={},a=[];t<n;)r[e[t]]||(r[e[t]]=a.push(e[t])),t++;return a}(e)).sort(function(e,t){var n=typeof e;return n==typeof t&&"number"==n?e-t:String(e)==String(t)?0:String(e)<String(t)?-1:1}),d)for(t=0;t<e.length;t++)e[t]in p&&(p[e[t]].addClass("selected"),n.push(e[t]));else e[0]in p&&(p[e[0]].addClass("selected"),n.push(e[0]));return r!=(g=n).join(" ")&&(s.trigger("selector:change",d?e:e[0]),!0)},this.getTitleText=function(){function e(e){return e in p?p[e].text():e}if(0==g.length)return c.getText("empty_"+h)||c.getText("empty");var t=[e(g[0])],n=g[0],r=g[0],a=g.length;for(u=1;u<a;u++)g[u]==r+1?(r=g[u],t[t.length-1]=e(n)+"-"+e(r)):(n=r=g[u],t.push(e(r)));if(1<t.length){var s="0"===t[0]?+t[1]:+t[0],i=this.getTotalItem(s);if(console&&console.log(h,i,t.length,m.multipleOf),i===t.length){for(var o=!0,l=0,u=1;u<t.length;u++)if(l+=s,+t[u]%s!=0||s*u!==l){o=!1;break}if(o)return"every "+s}}return t.join(",")},this.clear=function(){p={},m.setValue([]),a.empty()},this.add=function(s,i){(i+"").match(/^[0-9]+$/)||(n=!1);var e=y("<li>"+(i=r&&n&&i<10?"0"+i:i)+"</li>"),o=(a.append(e),p[s]=e,0),l=null,u=this.getTotalItem(),c=this.itemStartAt();e.click(function(e){o++;var t=y(this);if(1===o)l=setTimeout(function(){d&&t.hasClass("selected")?m.removeValue(s):(m.addValue(s),d||m.close()),o=0},200);else if(d){for(var n=+i,r=[],a=c;a<u;a++)m.removeValue(a),a%n==0&&m.multipleOf!==n&&r.push(a);if(m.multipleOf!==n)for(m.multipleOf=n,a=0;a<r.length;a++)m.addValue(r[a]);else m.multipleOf=null;clearTimeout(l),o=0}}).dblclick(function(e){e.preventDefault()})},this.$=s,e.find("br:eq(0)").after(s).remove(),s.addClass("jqCron-selector-"+e.find(".jqCron-selector").length).append(t).append(a).bind("selector:open",function(){var e,t;n&&(e=1,5<(t=a.find("li").length)&&t<=16?e=2:16<t&&t<=23?e=3:23<t&&t<=40?e=4:40<t&&(e=5),a.addClass("cols"+e)),a.show()}).bind("selector:close",function(){a.hide()}).bind("selector:change",function(){t.html(m.getTitleText())}).click(function(e){e.stopPropagation()}).trigger("selector:change"),y.fn.disableSelection&&s.disableSelection(),t.click(function(e){m.isOpened()||c.isDisabled()?m.close():m.open()}),m.close(),m.clear()}this.jqCron=s,this.jqCronSelector=w;var n=0;y.fn.uniqueId=function(t){return this.each(function(){var e;y(this).attr("id")||(e=function(e){for(var t;;)if(t=(e||"JQUID")+""+ ++n,!document.getElementById(t))return t}(t),y(this).attr("id",e))})},y.extend(y.expr[":"],{container:function(e){return(e.tagName+"").toLowerCase()in{a:1,abbr:1,acronym:1,address:1,b:1,big:1,blockquote:1,button:1,cite:1,code:1,dd:1,del:1,dfn:1,div:1,dt:1,em:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,ins:1,kbd:1,label:1,li:1,p:1,pre:1,q:1,samp:1,small:1,span:1,strong:1,sub:1,sup:1,td:1,tt:1}},autoclose:function(e){return(e.tagName+"").toLowerCase()in{area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,link:1,meta:1,param:1}}})}.call(this,jQuery);